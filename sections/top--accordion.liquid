{% liquid
  comment URL initialized
  endcomment
  assign urlNotion = "https://www.notion.so/Your-Name-db7f6f4af9a64534a77495922a4595c9?pvs=4"
  assign urlFaceBook = "https://www.facebook.com/profile.php?id=100091746930736"
  assign urlLinkedIn = "https://www.linkedin.com/in/yuya-wada-136458271/"
  assign urlGithub = "https://github.com/ruru9yoonsic/helpful-jp/blob/main/sections/top--accordion.liquid"
  assign btnSwitchToHaruna = "https://cdn.shopify.com/s/files/1/0645/5151/8428/files/top__switch_to_haruna.png?v=1680769720"
  assign btnSwitchToYuya = "https://cdn.shopify.com/s/files/1/0645/5151/8428/files/top__switch_to_yuya.png?v=1680769720"
%}

{% comment %} Layout {% endcomment %}
<section class="wrapper--{{ section.id }}">
  <div data-name="yuya" class="inner--{{ section.id }}">
    <img src="https://cdn.shopify.com/s/files/1/0645/5151/8428/files/top__fv_yuya_with_comments.jpg?v=1680506753" alt="yuya" width="100%" height="100%">
    <ul class="top--accordion">
      <li class="top--accordion-item">
        <h3 class="top--accordion-header">Profile {% render 'svg-list', name: 'accordionArrow' %}</h3>
        <div class="top--accordion-content">
          <div class="top--accordion-content-grid">
            <dt>Name</dt>
            <dd>Yuya Wada</dd>
            <dt>Birthday</dt>
            <dd>April, 1997</dd>
            <dt>Hobby</dt>
            <dd>Tennis / Surfing / Bouldering / Poker / NFL / Cooking / Coffee</dd>
            <dt>Job</dt>
            <dd>Shopify front-end developer</dd>
            <dt>Skill</dt>
            <dd>HTML / CSS / Liquid / JavaScript (jQuery) / React (Next.js) / TypeScript / Python</dd>
            <dt>Code</dt>
            <dd><a href="{{ urlGithub }}" target="_blank">{% render 'svg-list', name: 'logoGitHub' %}</a></dd>
          </div>
        </div>
      </li>
      <li class="top--accordion-item">
        <h3 class="top--accordion-header">Clients {% render 'svg-list', name: 'accordionArrow' %}</h3>
        <div class="top--accordion-content">
          {% for article in blogs['works'].articles reversed %}
            <a href="{{ article.url }}" target="_blank">
              <img src="{{ article.image | img_url: 'medium' }}">
              <p>
                {%- if article.metafields.english.title != blank -%}
                  {{ article.metafields.english.title }}
                {%- else -%}
                  {{ article.title }}
                {%- endif -%}
              </p>
            </a>
          {% endfor %}
          <span class="top--accordion-content-scroll">scroll â†’</span>
        </div>
      </li>
      <li class="top--accordion-item">
        <h3 class="top--accordion-header">Resume {% render 'svg-list', name: 'accordionArrow' %}</h3>
        <div class="top--accordion-content">
          <div class="top--accordion-content-grid">
            <dt>Link</dt>
            <dd class="top--accordion-content-grid-notion">
              <a href="{{ urlNotion }}" target="_blank">{% render 'svg-list', name: 'logoNotion' %}</a>
            </dd>
          </div>
        </div>
      </li>
      <li class="top--accordion-item">
        <h3 class="top--accordion-header">Contact {% render 'svg-list', name: 'accordionArrow' %}</h3>
        <div class="top--accordion-content">
          <div class="top--accordion-content-grid">
            <dt>Email</dt>
            <dd>yuya.wada.san@gmail.com</dd>
            <dt>Facebook</dt>
            <dd class="top--accordion-content-grid-facebook">
              <a href="{{ urlFaceBook }}" target="_blank">{% render 'svg-list', name: 'logoFaceBook' %}</a>
            </dd>
            <dt>LinkedIn</dt>
            <dd class="top--accordion-content-grid-linkedin">
              <a href="{{ urlLinkedIn }}" target="_blank">{% render 'svg-list', name: 'logoLinkedIn' %}</a>
            </dd>
          </div>
        </div>
      </li>
      <li class="top--accordion-item">
        <h3 class="top--accordion-header">Message {% render 'svg-list', name: 'accordionArrow' %}</h3>
        <div class="top--accordion-content">
          <p>
            My motto is <span>"Helpful for you"</span><br>
            If you need help with Shopify, I would be happy to assist you.<br>
            I have <span>over 3 years</span> of experience in Shopify and have obtained <span>Shopify Experts</span><br>
            This website is also a fully customized site using Shopify. <br>
            Thank you for visiting me.<br>
            Much appreciated!
          </p>
        </div>
      </li>
    </ul>    
  </div>

  {% comment %} Haruna {% endcomment %}
  <div data-name="haruna" class="inner--{{ section.id }}">
    <img src="https://cdn.shopify.com/s/files/1/0645/5151/8428/files/image_6.png?v=1666529708" alt="haruna" width="100%" height="100%">
    <ul class="top--accordion">
      <li class="top--accordion-item">
        <h3 class="top--accordion-header">Profile {% render 'svg-list', name: 'accordionArrow' %}</h3>
        <div class="top--accordion-content">
          <div class="top--accordion-content-grid">
            <dt>Name</dt>
            <dd>Haruna Fukuyama</dd>
            <dt>Birthday</dt>
            <dd>June, 1995</dd>
            <dt>Hobby</dt>
            <dd>Take a work / watching dramas on Netflix</dd>
            <dt>Job</dt>
            <dd>designer / secretary / restaurant staff</dd>
            <dt>Skills</dt>
            <dd>illustration / Photoshop / Figma / HTML / CSS</dd>
          </div>
        </div>
      </li>
      <li class="top--accordion-item">
        <h3 class="top--accordion-header">Site {% render 'svg-list', name: 'accordionArrow' %}</h3>
        <div class="top--accordion-content">
          <p>
            <a href="https://haruportfolio.studio.site" target="_blank">https://haruportfolio.studio.site</a>
          </p>
        </div>
      </li>
      <li class="top--accordion-item">
        <h3 class="top--accordion-header">Resume {% render 'svg-list', name: 'accordionArrow' %}</h3>
        <div class="top--accordion-content">
          <div class="top--accordion-content-grid">
            <dt>Link</dt>
            <dd>Coming Soon...</dd>
          </div>
        </div>
      </li>
      <li class="top--accordion-item">
        <h3 class="top--accordion-header">Contact {% render 'svg-list', name: 'accordionArrow' %}</h3>
        <div class="top--accordion-content">
          <div class="top--accordion-content-grid">
            <dt>E-mail</dt>
            <dd>h.fukuyama10@gmail.com</dd>
            <dt>Facebook</dt>
            <dd class="top--accordion-content-grid-facebook">
              <a href="https://www.facebook.com/profile.php?id=100091660504547" target="_blank">{% render 'svg-list', name: 'logoFaceBook' %}</a>
            </dd>
          </div>
        </div>
      </li>
    </ul>    
  </div>
</section>
{% comment %} Switch Button {% endcomment %}
<div class="top--btn-switch">
  <img src="{{ btnSwitchToHaruna }}" width="100" height="100">
</div>


<style>
.wrapper--{{ section.id }} {
  background-color: {{ section.settings.bgColor }};
  padding: {{ section.settings.padding }};
  margin: {{ section.settings.margin }};
}
.inner--{{ section.id }} {
  max-width: 750px;
  margin: 0 auto;
  display: none;
}
.inner--{{ section.id }} > img {
  display: block;
  margin: 10px;
  width: calc(100% - 20px);
  border-radius: 10px;
  max-height: 400px;
  object-fit: cover;
}
.inner--{{ section.id }} .top--accordion-content-img {    
  max-width: 200px;
  max-height: 200px;
  border-radius: 100%;
  display: block;
  margin: 20px auto 0;
}
.inner--{{ section.id }} h2 {
  text-align: center;
  font-size: 2.5rem;
}
.inner--{{ section.id }} ul {
  list-style: none;
  padding: 0;
  margin: 0 auto;
}
.top--accordion {
  background-color: {{ settings.colors_accent_2 }};
  width: 100vw;
}
@media (width > 750px){
  .top--accordion {    
    max-width: 730px;
  }
}
.top--accordion .top--accordion-item {
  border-bottom: solid 2px {{ settings.colors_background_1 }};
}
.top--accordion .top--accordion-item h3 {
  padding: 0;
  margin: 0;
  color: {{ settings.colors_background_1 }};
  font-family: {{ settings.type_body_font.family }};
  font-weight: bold;
}
.top--accordion .top--accordion-item .top--accordion-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 20px;
}
.top--accordion .top--accordion-item .top--accordion-content {
  padding: 10px 20px 20px;
  background-color: {{ settings.colors_background_1 }};
  display: none;
}
.top--accordion .top--accordion-item:has(a) {
  position: relative;
}
.top--accordion .top--accordion-item .top--accordion-content:has(.top--accordion-content-scroll) {
  display: flex;
  align-items: center;
  overflow-x: scroll;  
  gap: 20px;
  padding: 20px 20px 30px;
}
.top--accordion .top--accordion-item .top--accordion-content a {  
  color: var(--color-base-text);
  text-decoration: none;
}
.top--accordion .top--accordion-item .top--accordion-content .top--accordion-content-scroll {  
  color: var(--color-base-text);
  position: absolute;
  bottom: 0;
  right: 10px;
}
.top--accordion .top--accordion-item .top--accordion-content p {
  padding: 0;
  margin: 0;
  color: var(--color-base-text);
}
.top--accordion .top--accordion-item .top--accordion-content .top--accordion-content-grid  {
  display: grid;
  grid-template-columns: 2fr 5fr;
  align-items: end;
  margin-top: 10px;
  row-gap: 20px;
  width: 100%;
}
.top--accordion .top--accordion-item .top--accordion-content .top--accordion-content-grid dt, 
.top--accordion .top--accordion-item .top--accordion-content .top--accordion-content-grid dd {
  margin: 0;
  border-bottom: 0.5px solid rgb(5, 0, 78, 0.5);
}
.top--accordion .top--accordion-item .top--accordion-content .top--accordion-content-grid .top--accordion-content-grid-notion svg {
  width: 25px;
  height: 25px;
  transform: translateY(2px);
}
.top--accordion .top--accordion-item .top--accordion-content .top--accordion-content-grid .top--accordion-content-grid-facebook svg {
  width: 25px;
  height: 25px;
  transform: translateY(2px);
}
.top--accordion .top--accordion-item .top--accordion-content .top--accordion-content-grid .top--accordion-content-grid-linkedin svg {
  width: 25px;
  height: 25px;
  transform: translateY(2px);
}
.top--accordion .top--accordion-item .top--accordion-content p span {
  background: linear-gradient(transparent 60%, rgba(253, 95, 0, 0.6) 60%);
}
@media (width > 750px){
  .top--accordion .top--accordion-item .top--accordion-content .top--accordion-content-grid  {
    grid-template-columns: 150px auto;
  }
  .top--accordion .top--accordion-item .top--accordion-content:has(a) {
    overflow-x: auto;
  }
}

.top--btn-switch {
  position: fixed;
  top: 10px;
  left: 10px;
  cursor: pointer;
}
@media (hover: hover){
  .top--btn-switch:hover {
    opacity: 70%;
  }
}
@media (hover: none){
  .top--btn-switch:active {
    opacity: 70%;
  }
}
@media (width > 1000px) {
  .top--btn-switch {
    top: calc(100vh - 150px);
    left: calc(50vw - 480px);
  }
}

{% comment %} haruna {% endcomment %}
[data-name="haruna"] .top--accordion {
  background-color: #E88E8E;
}
[data-name="haruna"] .top--accordion p:has(a) {
  display: block;
  width: 100%;
  border-bottom: 0.5px solid rgb(5, 0, 78, 0.5);
}
</style>

{% schema %}
{
  "name": "TOP accordion",
  "settings": [
    {
      "type": "color",
      "id": "bgColor",
      "label": "back ground color"
    },{
      "type": "text",
      "id": "margin",
      "label": "margin:"
    },{
      "type": "text",
      "id": "padding",
      "label": "padding:"
    }
  ],
  "presets": [
    {
      "name": "TOP accordion"
    }
  ]
}
{% endschema %}

<script>
$(document).ready(function() {

  {% comment %} only person view {% endcomment %}
  function getParam(name, url) {
    if (!url) url = window.location.href;
    name = name.replace(/[\[\]]/g, "\\$&");
    var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
        results = regex.exec(url);
    if (!results) return null;
    if (!results[2]) return '';
    return decodeURIComponent(results[2].replace(/\+/g, " "));
  }

  const $topBtnSwitch = $('.top--btn-switch'),
    $yuya = $('[data-name="yuya"]'),
    $haruna = $('[data-name="haruna"]');

  {% comment %} show first contents {% endcomment %}
  const viewParam = getParam('v');
  if(viewParam && viewParam == 'yuya') {    
    $topBtnSwitch.hide();
    $yuya.show();
  }else if(viewParam && viewParam == 'haruna'){  
    $topBtnSwitch.hide();
    $yuya.hide();
    $haruna.show();
  }else{
    $haruna.hide();
    $yuya.show();
  }

  {% comment %} Initialized {% endcomment %}
  $('.top--accordion-content').hide();

  {% comment %} declaration switch btn image src {% endcomment %}
  const imgSrcToYuya = "{{ btnSwitchToYuya }}";
  const imgSrcToHaruna = "{{ btnSwitchToHaruna }}";

  {% comment %} Switch Profile {% endcomment %}
  $topBtnSwitch.on('click', function() {
    var currentImgSrc = $(this).children('img').attr('src');

    {% comment %} haruna to yuya {% endcomment %}
    if(currentImgSrc == imgSrcToYuya) {
      $(this).children('img').attr('src', imgSrcToHaruna);
      $haruna.hide();
      $yuya.fadeIn();

    {% comment %} yuya to haruna {% endcomment %}
    }else if (currentImgSrc == imgSrcToHaruna) {
      $(this).children('img').attr('src', imgSrcToYuya);
      $yuya.hide();
      $haruna.fadeIn();
    }
  });
  
  {% comment %} Accordion open and close {% endcomment %}
  $('.top--accordion-header').click(function() {
    var $accordionButton = $(this).find('svg');
    var rotation = $accordionButton.data('rotation') || 0;
    rotation += 180;
    $accordionButton.css('transform', 'rotate(' + rotation + 'deg)');
    $accordionButton.data('rotation', rotation);
  
    $(this).toggleClass('active');
    $(this).next('.top--accordion-content').slideToggle();
  });
  
});  
</script>
